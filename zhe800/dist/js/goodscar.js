"use strict";ajax({type:"get",url:"../api/car3.php",success:function(e){!function(e){arr=JSON.parse(e);var n=document.querySelector(".m1box1"),t=document.querySelector(".m1box2");getcookie("username")?0==c?(n.style.display="block",t.style.display="none"):(t.style.display="block",n.style.display="none"):(n.style.display="block",t.style.display="none");var c=arr.total,a=document.getElementById("conten"),s=arr.list.map(function(e){return'<div class="s-con">\n                    <input type="checkbox" class="goods-checkb">\n                    <div class="msg">\n                        <img src="'+e.gurl+'" alt="">\n                        <p>'+e.gname+'</p>\n                    </div>\n                    <div class="unit-price">\n                        <p><del>￥553.47</del></p>\n                        <div class="jg"><p class="jiage">'+e.price+'</p></div>\n                    </div>\n                    <div class="gooods-Number">\n                        <input type="button" value="-" class="cur">\n                        <input type="text" class="textnum" data-kucun="'+e.stock+'" value="'+e.gnum+'">\n                        <input type="button" value="+" class="add">\n                    </div>\n                    <div class="price">\n                        <p class="xiaoji">'+e.price+'</p>\n                    </div>\n                    <div class="operation">\n                        <a href="###">移入收藏夹</a>\n                        <a href="###" class="del">删除</a>\n                    </div>\n                </div>'}).join("");function i(e,n){var t=r[n].dataset.kucun;console.log(t),e<1?e=1:t<=e&&(e=t),r[n].value=e,d[n].innerHTML=(e*u[n].innerHTML).toFixed(2),E()}a.innerHTML=s;var o=a.getElementsByClassName("cur"),l=a.getElementsByClassName("add"),r=a.getElementsByClassName("textnum"),d=a.getElementsByClassName("xiaoji"),u=a.getElementsByClassName("jiage"),m=a.getElementsByClassName("del"),p=a.getElementsByClassName("s-con"),g=document.getElementById("bottom-checkb"),v=document.getElementsByClassName("goods-checkb"),h=document.querySelector(".jianshu"),y=document.querySelector(".zongjia"),f=document.querySelector(".btn"),x=document.querySelector(".dels"),k=arr.list;for(N=0;N<o.length;N++)o[N].index=N,l[N].index=N,r[N].index=N,m[N].index=N,o[N].onclick=function(){var e=r[this.index].value;i(--e,this.index)},l[N].onclick=function(){var e=r[this.index].value;i(++e,this.index)},r[N].oninput=function(){i(this.value,this.index)},m[N].onclick=function(){var e=k[this.index].gid;for(confirm("您确定要删除这行吗？")&&(window.location.reload(),ajax({type:"get",url:"../api/car3.php",data:{goodsid:e},success:function(e){}}),a.removeChild(p[this.index])),N=0;N<p.length;N++)m[N].index=N;E()};function b(){for(var e=0,n=[],t=0;t<v.length;t++)v[t].checked&&(e++,n.push(t));return e==v.length&&0!=e?g.checked=!0:g.checked=!1,n}function E(e){e=b();var n=0,t=0;e.forEach(function(e){n+=1*r[e].value,t+=1*d[e].innerHTML}),h.innerHTML=n,y.innerHTML=t.toFixed(2),e.length?f.className="bg1":f.className="btn"}g.onclick=function(){for(var e=0;e<v.length;e++)v[e].checked=g.checked;E()};for(var N=0;N<v.length;N++)v[N].onclick=function(){E()};x.onclick=function(){var e=b().reverse();confirm("您确定要删除选中的行吗？")&&(window.location.reload(),ajax({type:"get",url:"../api/car3.php",data:{ssse:"cars"},success:function(e){}}),e.forEach(function(e){a.removeChild(p[e])}),E())}}(e)}});